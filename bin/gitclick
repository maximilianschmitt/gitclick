#!/usr/bin/env node
'use strict';

const minimist = require('minimist');
const assign = require('object.assign');
const argsParser = require('../lib/args-parser');
const homeDir = require('home-dir');

const gitclick = require('../main')(process.env.GITCLICK_STORAGE_PATH || homeDir('./.gitclick'));
const cli = require('./cli')(gitclick);

const prompt = function(opts) {
  return new Promise(function(res) {
    require('inquirer').prompt(opts, res);
  });
};

const argv = minimist(process.argv.slice(2));

function create() {
  cli.create(argsParser.create(argv));
}

function defaultAccount() {
  cli.defaultAccount();
}

function add() {
  cli.add();
}

function list() {
  cli.list();
}

function remove() {
  const account = argv._[1];
  cli.remove(account);
}

function use() {
  const account = argv._[1];
  cli.use(account);
}

function help() {
  cli.help();
}

function version() {
  cli.version();
}

switch (argv._[0]) {
  case 'create': create(); return;
  case 'list': list(); return;
  case 'add': add(); return;
  case 'remove': remove(); return;
  case 'use': use(); return;
  case 'default': defaultAccount(); return;
}

if (argv.v || argv.version) { help(); return; }

version();